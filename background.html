<script src="images.js" type="text/javascript"></script>
<script src="shared.js" type="text/javascript"></script>
<script type="text/javascript">
    chrome.extension.onRequest.addListener(function(request, sender, sendResponse)
    {
        if(request.Type == 'OverlayChanged')
        {
            PPStorage.UpdateOverlayPosition(GlobalStorage.get_CurrentOverlayId(), request);
        }
    });
    
    //React when a browser action's icon is clicked.
    chrome.browserAction.onClicked.addListener(function(tab) {
        chrome.tabs.insertCSS(tab.id, { file: "style.css"});
        chrome.tabs.executeScript(null, { file: "jquery-1.6.2.min.js" }, function () {
            chrome.tabs.executeScript(null, { file: "jquery-ui-1.8.16.custom.min.js" }, function () {
                chrome.tabs.executeScript(null, { file: "content.js" }, function () {
                    chrome.tabs.executeScript(null, { code: "togglePanel();" });
                });
            });
        });
    });
 </script>